<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Receipt Sorter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-2xl">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Settings</h1>
            <a href="/" class="text-blue-600 hover:text-blue-800 font-semibold flex items-center">
                <i class="fas fa-arrow-left mr-2"></i> Back to Dashboard
            </a>
        </div>

        {% if message %}
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6" role="alert">
            <span class="block sm:inline">{{ message }}</span>
        </div>
        {% endif %}

        {% if error %}
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6" role="alert">
            <span class="block sm:inline">{{ error }}</span>
        </div>
        {% endif %}

        <div class="bg-white rounded-xl shadow-lg p-8">
            <form action="/settings" method="post" class="space-y-6">
                <!-- Gemini API -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2" for="gemini_api_key">
                        Google Gemini API Key
                    </label>
                    <input type="password" name="gemini_api_key" id="gemini_api_key" value="{{ gemini_api_key }}" 
                           class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"
                           placeholder="Enter your API key">
                    <p class="mt-1 text-xs text-gray-500">Get yours at <a href="https://aistudio.google.com/" target="_blank" class="text-blue-500 underline">AI Studio</a></p>
                </div>

                <!-- Google Sheet ID -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2" for="google_sheet_id">
                        Google Sheet ID
                    </label>
                    <input type="text" name="google_sheet_id" id="google_sheet_id" value="{{ google_sheet_id }}" 
                           class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500 font-mono text-sm"
                           placeholder="1BxiMVs0XRA5nFMdKb...">
                    <p class="mt-1 text-xs text-gray-500">
                        Find this in your URL: <code>docs.google.com/spreadsheets/d/<span class="bg-yellow-200 font-bold">SPREADSHEET_ID</span>/edit</code>
                    </p>
                </div>

                <!-- Service Account File -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2" for="service_account_file">
                        Service Account JSON Path
                    </label>
                    <input type="text" name="service_account_file" id="service_account_file" value="{{ service_account_file }}" 
                           class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"
                           placeholder="e.g., service_account.json">
                </div>

                <div class="flex justify-end pt-4">
                    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-colors shadow-md">
                        Save Changes
                    </button>
                </div>
            </form>
        </div>
        
        <div class="mt-8 bg-blue-50 p-6 rounded-lg border border-blue-100 text-sm text-blue-800">
            <h3 class="font-bold mb-2 flex items-center">
                <i class="fas fa-info-circle mr-2"></i> How to use Google Sheets
            </h3>
            <ol class="list-decimal list-inside space-y-1">
                <li>Create a Google Service Account in Google Cloud Console</li>
                <li>Download the JSON key and place it in the project folder</li>
                <li>Share your Google Sheet with the service account's email address</li>
                <li>Copy the Spreadsheet ID from the URL and paste it above</li>
            </ol>
        </div>
    </div>
</body>
</html>
